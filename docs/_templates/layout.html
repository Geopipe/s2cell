{% extends "!layout.html" %}
{% block extrahead %}

    <!-- Metadata -->
    {%- if meta %}
    {%- for tag in ('description', 'author', 'keywords') %}
    {%- if tag in meta %}
    <meta name="{{ tag }}" content="{{ meta[tag].replace('\n', ' ')|e }}">
    {%- endif %}
    {%- endfor %}
    {%- endif %}

    <!-- Icons -->
    {%- if favicon %}
    <link rel="shortcut icon" href="{{ pathto('_static/' + favicon, 1)|e }}"/>
    {%- endif %}
    {%- if icon_png %}
    <link rel="apple-touch-icon" href="{{ pathto('_static/' + icon_png, 1)|e }}">
    {%- endif %}

    <!-- Canonical URL -->
    {%- if baseurl %}
    <link rel="canonical" href="{{ baseurl.rstrip('/')|e }}/{{ pagename|e }}.html"/>
    {%- endif %}

    <!-- Open Graph -->
    {%- if baseurl %}
    <meta property="og:url" content="{{ baseurl.rstrip('/')|e }}/{{ pagename|e }}.html" />
    {%- endif %}
    <meta property="og:title" content="{{ title|striptags|e }}{{ titlesuffix }}" />
    {%- if baseurl and icon_png %}
    <meta property="og:image" content="{{ (baseurl.rstrip('/') + '/_static/' + icon_png)|e }}" />
    {%- endif %}
    <meta property="og:type" content="website">
    {%- if meta and 'description' in meta %}
    <meta property="og:description" content="{{ meta['description'].replace('\n', ' ') }}">
    {%- endif %}

    <script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "52ee346c580548d7ab0cfb7f837ba106"}'></script>

    {{ super() }}
{% endblock %}
